<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <script type="text/javascript" src="JS/cache.js" ></script>
    <script type="text/javascript" src="JS/jquery-2.1.3.min.js"></script>
    <script type="text/javascript" src="JS/modernizr.custom.00923.js"></script>

    <script type="text/javascript">
        function setCookie(cookieName, cookieValue){

            if(navigator.cookieEnabled)
            {
                var date = new Date();

                date.setTime(date.getTime()+ (3 * 24 * 60 * 60 * 1000));

                var expiers = "; expiers="+ date.toUTCString();

                document.cookie = cookieName+"=" + cookieValue + expiers ;
            }

        }

        function getCookie(){

            var cookie = document.cookie.split(';');

            return cookie.length;
        }

        $(document).ready(function() {


            if(getCookie() != 3) {
                var screenWidth = screen.width;
                var screenHeight = screen.height;
                var isTouch = Modernizr.touch;

                setCookie("screen-width", screenWidth);
                setCookie("screen-height", screenHeight);
                setCookie("isTouch", isTouch);

                location.reload(true);
            }


            $.ajax({
                type: 'GET',
                url: "rest/captcha/device",
                contentType:'application/json',
                success:function(msg){
                    var info = msg.split(';');
                    document.getElementById("device").innerHTML = "Your Device is a : "+ info[0];
                    document.getElementById("width").innerHTML = "Screen Width : " +info[1]+"inch";
                    document.getElementById("height").innerHTML = "Screen Height :"+ info[2]+"inch";
                    document.getElementById("touch").innerHTML = "Has a touch screen :"+info[3];
                },
                failure: function (){
                    document.getElementById("device").innerHTML = "Error";
                }
            });
        });


    </script>
</head>
<body>
<h1>Identify Device</h1>

<p id="device"></p>
<p id="width"></p>
<p id="height"></p>
<p id="touch"></p>

</body>
</html>